<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>  
    div.padded {  
      padding-top: 0px;  
      padding-right: 100px;  
      padding-bottom: 0.25in;  
      padding-left: 100px;  
    }  
  </style> 
<title>Walker Snedaker  |  CS 184</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="style.css" media="screen" />
</head>
<body>
<br />
<h1 align="middle">Assignment 3: PathTracer part 2</h1>
    <h2 align="middle">Walker Snedaker</h2>

    <div class="padded">
        <p>Use this section to write an overview of the assignment. All of the text in your write-up should be <em>in your own words</em>. If you need to add additional HTML features to this document, you can search the <a href="http://www.w3schools.com/">http://www.w3schools.com/</a> website for instructions. To edit the HTML, you can just copy and paste existing chunks and fill in the text and image file names appropriately.</p>
        <o>
            The website writeup is intended to be a self-contained walkthrough of the assignment: we want this to be a piece of work which showcases your understanding of relevant concepts through both mesh images as well as written explanations about what you did to complete each part of the assignment. Try to be as clear and organized as possible when writing about your own output files or extensions to the assignment. We want to understand what you've achieved and how you've done it!</p>
            <p>If you are well-versed in web development, feel free to ditch this template and make a better looking page. Just make sure that you include all the components as we've laid them out here. </p>

            <h2 align="middle">Part 1: Mirror and Glass</h2>
            <p>In Part 1 I implemented the BRDF set up for glass objects and perfect mirror objects. First for Mirrors I implemented the BRDF by simpy taking the out going ray from the surface to be the vector in object space coordinates as the vector with negative x and y direction and the same z direction, with the specturm beign that of an ideal mirror and thus the reflectance divided by the angle from the normal. Next for Glass I implementd the BRDF by first calculating if there is total internal relfection and if these is than returning the reflection as if it is a mirror, if there is not total internal reflection I calculate Schlick's Approximation and use it as our random chance paramater to decide if the ray that impacts the surface reflects our of the surface or refracts into it. If the incoming ray refracts I use snells law to calculate the outgoing ray and finaly calculate the outgoing irradiance by taking it to be that of the reflection divided by the square of the snells law factor eta.</p>
            <p>Now lets look at the spheres scene and see how increasing the max number of bounces for each reveals interesting new multibounce effects. To start the first multibounce effect we witness is that at one bounce both the mirrored sphere and glass sphere are completely dark, while at two bounces the light has time to bounce onto the schene then onto the mirrored sphere then to the camera, but the light is still bouncing in the glass ball and has yet to move through to the camera. Then at 3 bounces we can see the glass ball as the light leaves it, now hitting the camera, but the light that bounces from the glass ball to other parts of the schene has yet to bounce to the camera, so the ball casts a shadow and is dark on the mirror. Then at 4 bounces the glass ball reflects form the mirrored ball to the camera, and the glass ball iluminates a spot on the ground as we would expect. Finaly we reach the maximum number of multibounce effects when the lights reflection of the mirrored ball makes it through the glass ball illuminating a patch on the wall. Its seen that this is the max number of effects since the 100 bounce version reveals no more effects.</p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/spheres0.png" width="480px" />
                            <figcaption align="middle">CBspheres run with maxdepth 0.</figcaption>
                        </td>
                        <td align="middle">
                            <img src="images/spheres1.png" width="480px" />
                            <figcaption align="middle">CBspheres run with maxdepth 1.</figcaption>
                        </td>
                    </tr>
                    <br />
                    <tr>
                        <td align="middle">
                            <img src="images/spheres2.png" width="480px" />
                            <figcaption align="middle">CBspheres run with maxdepth 2.</figcaption>
                        </td>
                        <td align="middle">
                            <img src="images/spheres3.png" width="480px" />
                            <figcaption align="middle">CBspheres run with maxdepth 3.</figcaption>
                        </td>
                    </tr>
                    <br />
                    <tr>
                        <td align="middle">
                            <img src="images/spheres4.png" width="480px" />
                            <figcaption align="middle">CBspheres run with maxdepth 4.</figcaption>
                        </td>
                        <td align="middle">
                            <img src="images/spheres5.png" width="480px" />
                            <figcaption align="middle">CBspheres run with maxdepth 5.</figcaption>
                        </td>
                    </tr>
                    <br />
                    <tr>
                        <td align="middle">
                            <img src="images/spheres100.png" width="480px" />
                            <figcaption align="middle">CBspheres run with maxdepth 100.</figcaption>
                        </td>
                    </tr>
                </table>
            </div>
            <p> Finaly here are a few other images rendered usign the code in this seciton. </p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/spheres7.png" width="480px" />
                            <figcaption align="middle">CBspheres run with maxdepth 7 and 256 samples per pixel</figcaption>
                        </td>
                        <td align="middle">
                            <img src="images/dragon.png" width="480px" />
                            <figcaption align="middle">CBdragon run with maxdepth 7 and 64 sampler per pixel.</figcaption>
                        </td>
                    </tr>
                    <br />
                    <tr>
                        <td align="middle">
                            <img src="images/lucy.png" width="480px" />
                            <figcaption align="middle">CBlucy run with maxdepth 7 and 64 samples per pixel</figcaption>
                        </td>
                        <td align="middle">
                            <img src="images/lucy1.png" width="480px" />
                            <figcaption align="middle">CBlucy run with maxdepth 7 and 256 sampler per pixel.</figcaption>
                        </td>
                    </tr>
                </table>
            </div>


            <h2 align="middle">Part 2: Microfacet Matetials</h2>
            <p>In part two of this project I implemented the BRDF for Microfacet Materials. This is done by calculatign the Normal Distrabution function of the incoming and outgoing rays, the Frensel term of the incoming radiance, and the shadowing masking term (which was calculated for in the starer code), then calculating the BRDF by multiplying these together and dividing them by the four times the component of the incoming and outgoing vectors normal to the surface. Finaly to find the vector to use to calculate the incoming irradiance and the outgoing pdf from this point I implemented a random sampling method that randomly samples the theta and phi angle of the incoming vector and uses these randomized values to calculate the pdf.</p>
            <p>To calculate the Normal Distrabution I first calculated the half vector h, which is the average of the normalized average of the incoming and outgoing vectors. Then using this vectof the Normal Distrabution is given by the following function</p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/f1PDF.PNG" width="480px" />
                        </td>
                    </tr>
                </table>
            </div>
            <p> Where theta h is the component of the half vector h in the same direction of the normal.</p>
            <p> Next I calculated the Frensel term using the following approximation, </p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/f2.PNG" width="480px" />
                        </td>
                    </tr>
                </table>
            </div>
            <p> Where the n and k parts of said equation are the rbg base vectors of the surface, and the approximation is used for each componet of said base vectors to calculate the new specturm component in the red, green, or blue components. </p>
            <p> Finaly the incoming light vector and the pdf along said vector was calculated in the folowing way. First I gennerated two random values between zero and one and used these values to generate the half vector by finding its theta and phi values with the following formula,  </p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/f3.PNG" width="480px" />
                        </td>
                    </tr>
                </table>
            </div>
            <p> In this formula r1 and r2 are the random values while alpha is the roughness of the surface. Next since the halfvector is the vector directly in the center of the incoming and outgoing vector we can calculate the incoming vecotr as 2 times the dot product of the half vector and the outgoing vector times the half vector minus the outgoing vector. Finaly with the incoming vector we calculate the pdf of the halfvector in the theta and phi direction and combine those to find the total pdf (the final formula) with the folowing fomulas: </p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/p4.PNG" width="480px" />
                        </td>
                    </tr>
                    <br />
                    <tr>
                        <td align="middle">
                            <img src="images/p5.PNG" width="480px" />
                        </td>
                    </tr>
                    <br />
                    <tr>
                        <td align="middle">
                            <img src="images/p6.PNG" width="480px" />
                        </td>
                    </tr>
                </table>
            </div>
            <p> Now we vary the alpha, roughness, of the surface for CBdragon_microfacet_au.dae with 128 saqmples per pixel and 1 sample per light and see how this affects the rendered image. As we can see below as the roughness incresed from .005 to .5 the dragon becomes more opake and the image became cleaner with less interference. But as we can see the final image has little to no glossyness or reflection, while the earlier images had a large amount of glossyness and relfection. This lack of glossyness makes sense since a surface is drefined to be a perfect mirror if it has zero rougness.</p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/dragon005.png" width="480px" />
                            <figcaption align="middle">CBdragon run with roughness .005.</figcaption>
                        </td>
                        <td align="middle">
                            <img src="images/dragon05.png" width="480px" />
                            <figcaption align="middle">CBdragon run with roughness .05.</figcaption>
                        </td>
                    </tr>
                    <br />
                    <tr>
                        <td align="middle">
                            <img src="images/dragon25.png" width="480px" />
                            <figcaption align="middle">CBdragon run with roughness .25.</figcaption>
                        </td>
                        <td align="middle">
                            <img src="images/dragon5.png" width="480px" />
                            <figcaption align="middle">CBdragon run with roughness .5.</figcaption>
                        </td>
                    </tr>
                </table>
            </div>
            <p> Next we compare the importance versus hemisphere sampling of the CBbunny_microfacet_cu.dae file with 64 samples per pixel and 1 sample per light and find that when rendered with the same number of sampler per pixel and per light the bunny run with importance sampling converges to a copper bunny with realistic glossyness and shading, while the hemisphere sampled bunny has more scatered rays and a dark non glossy surface.</p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/bunny64H.png" width="480px" />
                            <figcaption align="middle">CBbunny_microfacet_cu.dae run with hemisphere sampling.</figcaption>
                        </td>
                        <td align="middle">
                            <img src="images/bunny64I.png" width="480px" />
                            <figcaption align="middle">CBbunny_microfacet_cu.dae run with importance sampling.</figcaption>
                        </td>
                    </tr>
                </table>
            </div>
            <p>Finaly I set the n and k terms of CBbunny_microfacet_cu.dae to be the known n and k constanst for chromium, not copper, and rendered said image getting a chrome colored glossy rabit.</p>
            <div align="center">
                <table style="width=100%">
                    <tr>
                        <td align="middle">
                            <img src="images/bunnyCr.png" width="480px" />
                            <figcaption align="middle"> this is the chrome colored bunny</figcaption>
                        </td>
                    </tr>
                </table>
            </div>




            <p>Here is an example of how to include a simple formula:</p>
            <p align="middle"><pre align="middle">a^2 + b^2 = c^2</pre></p>
            <p>or, alternatively, you can include an SVG image of a LaTex formula.</p>
            <p>This time it's your job to copy-paste in the rest of the sections :)</p>



            <h2 align="middle">A Few Notes On Webpages</h2>
            <p>Here are a few problems students have encountered in the past. You will probably encounter these problems at some point, so don't wait until right before the deadline to check that everything is working. Test your website on the instructional machines early!</p>
            <ul>
                <li>Your main report page should be called index.html.</li>
                <li>Be sure to include and turn in all of the other files (such as images) that are linked in your report!</li>
                <li>
                    Use only <em>relative</em> paths to files, such as <pre>"./images/image.jpg"</pre>
                    Do <em>NOT</em> use absolute paths, such as <pre>"/Users/student/Desktop/image.jpg"</pre>
                </li>
                <li>
                    Pay close attention to your filename extensions. Remember that on UNIX systems (such as the instructional machines), capitalization matters. <pre>.png != .jpeg != .jpg != .JPG</pre>
                </li>
                <li>Be sure to adjust the permissions on your files so that they are world readable. For more information on this please see this tutorial: <a href="http://www.grymoire.com/Unix/Permissions.html">http://www.grymoire.com/Unix/Permissions.html</a></li>
                <li>And again, test your website on the instructional machines early!</li>
            </ul>
            </table>
        </o></div>
        </o></div>
</body>
</html>




